{
    "contents" : "---\ntitle: \"Weather Shiny App - Pitch Presentation\"\nauthor: \"nhatmn\"\ndate: \"Wednesday, June 17, 2015\"\noutput:\n  slidy_presentation:\n    keep_md: yes\n---\n\n## **Weather Shiny Introduction**\nhttps://nhatmn.shinyapps.io/ShinyWeatherApp\n\nThere are some simmilar Shiny apps on Internet currently. But they are just talk about database from 1950 to 2011 and mostly out-of-date data.\nIn this app, I improve one of those app:\n\n+ Update database to June 2015 by combine the dataset of [Coursera Reproducible Research Course](https://d396qusza40orc.cloudfront.net/repdata%2Fdata%2FStormData.csv.bz2) (1950 - 2011) with the latest dataset from NOAA\n+ Improve the UI to be looking better, modify and implement some new functions about maps colors, text controlling, and also error handling (the maps currently just supports 50 states of US, but the dataset contains more states, such as: \"American Samoa\", \"Virgin Islands\", etc.)\n\n### **Application's usage:**\nYou can adjust the Year range and Event Types using the Control Panel which located on the left side. On the right side, there are 3 tabs:\n\n+ **Weather Explorer By States**: Using Maps to show you the Injuries and/or Fatalities by States.\n+ **Weather Explorer By Years**: Using Plots to show you the Injuries and/or Fatalities by States.\n+ **Weather Data Viewing**: Show you the data in table. Filtered dataset can be downloaded on this tab.\n\n---\n\n## **About the dataset using on this app**\n\nThis application is based on the U.S. National Oceanic and Atmospheric Administration's (NOAA) storm database.\n\nThe Database contains:\n\n+ From 1950 to 2011: Dataset has been obtained from [Coursera Reproducible Research Course](https://d396qusza40orc.cloudfront.net/repdata%2Fdata%2FStormData.csv.bz2) and processed as a part of peer assignment for the course.\n+ From 2012 to June 01, 2015: Dataset from http://www.ncdc.noaa.gov/stormevents/ftp.jsp\n\nFull description of the processing workflow is available on [GitHub](https://github.com/nhatmn/NOAA_Weather_Data_1950-2015.git). Please check out and follow **Merge_to_2015.R** to reproduce the cleaning algorithm.\n\nSource code of this app is available on the [GitHub](https://github.com/nhatmn/Weather_Data_Explorer_App.git).\n\n----\n\n## **Damage of Weather Events by States**\n\n```{r, eval=TRUE, echo=FALSE, results = 'hide', error=FALSE, message=FALSE, warning=FALSE}\n# Load neccessary library\nlibrary(data.table)\nlibrary(ggplot2)\nlibrary(rCharts)\nlibrary(ggvis)\nlibrary(reshape2)\nlibrary(dplyr)\nlibrary(mapproj)\nlibrary(maps)\nlibrary(ggthemes)\n```\n\n```{r, eval=TRUE, results='hide', error=FALSE, message=FALSE, warning=FALSE}\n# Read the Weather dataset after aggregating\nweatherData <- fread('data/StormData_to2015_after_aggregating.csv') %>% \n  mutate(EVENT_TYPE = tolower(EVENT_TYPE))\nweatherData <- data.table(weatherData)\nweatherData$STATE_NAME <- tolower(weatherData$STATE_NAME)\n# Remove unsupported states\ndt <- weatherData[!weatherData$STATE_NAME %in% c(\"american samoa\", \"atlantic north\", \"atlantic south\",\n      \"district of columbia\", \"e pacific\", \"guam\", \"gulf of alaska\", \"gulf of mexico\", \"hawaii waters\", \n      \"lake erie\", \"lake huron\", \"lake michigan\", \"lake ontario\", \"lake st clair\", \"lake superior\", \n      \"puerto rico\", \"st lawrence r\", \"virgin islands\"),]\nevent_types <- sort(unique(dt$EVENT_TYPE))\naggregate_by_state <- function(dt, year_min, year_max, evtypes) {\n  replace_na <- function(x) ifelse(is.na(x), 0, x)\n  round_2 <- function(x) round(x, 2)\n  states <- data.table(STATE_NAME=sort(unique(dt$STATE_NAME)))\n  aggregated <- dt %>% filter(YEAR >= year_min, YEAR <= year_max, EVENT_TYPE %in% evtypes) %>%\n    group_by(STATE_NAME) %>%\n    summarise_each(funs(sum), COUNT:CROPS_DAMAGE)\n  left_join(states,  aggregated, by = \"STATE_NAME\") %>%\n    mutate_each(funs(replace_na), FATALITIES:CROPS_DAMAGE) %>%\n    mutate_each(funs(round_2), PROPERTY_DAMAGE, CROPS_DAMAGE)    \n}\n# Get damage of weather events by states\ndata <- aggregate_by_state(weatherData, 1950, 2015, event_types)\ndata$Affected <- data$FATALITIES + data$INJURIES\n```\n\n## **Population Impact 1950 - 2015 (Number of Affected)**\n\n```{r, echo=FALSE}\n# Draw Map\nstates_map <- map_data(\"state\")\nfill <- \"Affected\"\nyear_min <- 1950\nyear_max <- 2015\ntitle <- \"Population Impact %d - %d (Number of Affected)\"\ntitle <- sprintf(title, year_min, year_max)\np <- ggplot(data, aes(map_id = STATE_NAME))\np <- p + geom_map(aes_string(fill = fill), map = states_map, colour='black')\np <- p + expand_limits(x = states_map$long, y = states_map$lat)\np <- p + coord_map() + theme_bw(base_size = 14)\np <- p + labs(x = \"Long\", y = \"Lat\", title = title)\np <- p + geom_point(x=5, y=5) + coord_fixed()\np + scale_fill_gradient(low = \"#d3e992\", high = \"#669900\")\n```\n\n",
    "created" : 1434538281559.000,
    "dirty" : false,
    "encoding" : "UTF-8",
    "folds" : "",
    "hash" : "1965812430",
    "id" : "15171154",
    "lastKnownWriteTime" : 1434551192,
    "path" : "D:/GitHub/WeatherAppReproduciblePitchPresentation/presentation.Rmd",
    "project_path" : "presentation.Rmd",
    "properties" : {
        "tempName" : "Untitled1"
    },
    "source_on_save" : false,
    "type" : "r_markdown"
}